import{M as t,G as e,a as n,C as o,b as i,c as a,O as s,d as r,R as l,V as d,S as c,e as w,B as h,A as m,f as p,T as u,g,h as f,P as y,W as b,i as v,j as k,k as I,l as x,m as M,n as D,o as j,D as z,p as F,q as C,L as E}from"./vendor.bfd2a024.js";class P{constructor(o,i,a,s=null){this.isGroup=!1,this.distance=0,this.tilt=t.randInt(-70,10),this.theta=t.randFloat(0,6.28318530718),this.cameraIsAt=!1,this.entity=null,this.entityCloseUp=null,null!=s?this.entity=s:this.isGroup?this.entity=new e:this.entity=new n,this.entity.name=o,this.isGroup=i,this.distance=a}swapEntities(t){!1===this.cameraIsAt?(t.remove(this.entity),t.add(this.entityCloseUp),this.cameraIsAt=!0):(t.remove(this.entityCloseUp),t.add(this.entity),this.cameraIsAt=!1)}addMesh(t,e){this.isGroup?this.entity.add(new n(t,e)):(this.entity.geometry=t,this.entity.material=e)}setCloseUp(t){this.entityCloseUp=t,this.entityCloseUp.name=this.entity.name+" close"}rotate(t,e,n){this.entity.rotation.x+=t,this.entity.rotation.y+=e,this.entity.rotation.z+=n}adjustOrbit(){let t;t=this.cameraIsAt?this.entityCloseUp:this.entity;t.position.x=this.distance*Math.cos(this.theta),t.position.y=this.distance*Math.sin(this.theta),t.position.z=this.tilt*Math.sin(this.theta),this.theta+=1/(.09*this.distance**2)}addTree(){const e=t.randFloat(.5,1),r=new o(.1,.1,e,12),l=new i({color:"brown"}),d=new a(.4,2*e,12),c=new i({color:"green"}),w=new s;w.add(new n(r,l));const h=new n(d,c);h.position.y=3*e/2,w.add(h),w.position.x-=t.randFloat(7,15),w.position.y+=6,w.position.z-=t.randFloat(-6,6.75),this.entityCloseUp.add(w)}reverberate(e){if("blackhole"==this.entity.name){let n=.5*Math.sin(e)+.5;const o=new r("#BAD1FF"),i=new r("#FFFFFF");let a;return this.entity.material.uniforms.glowColor.value=o.lerp(i,n),a=t.randInt(1,10)>8?.4:0,e+a}return 0}setName(t){this.entity.name=t}getName(){return this.entity.name}}const S="\nuniform vec3 viewVector;\nuniform float c;\nuniform float p;\nvarying float intensity;\nvoid main() \n{\n    vec3 vNormal = normalize( normalMatrix * normal );\n\tvec3 vNormel = normalize( normalMatrix * viewVector );\n\tintensity = pow( c - dot(vNormal, vNormel), p );\n\t\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",L="\nuniform vec3 glowColor;\nvarying float intensity;\nvoid main() \n{\n\tvec3 glow = glowColor * intensity;\n    gl_FragColor = vec4(glow, 1.0);\n}\n";var A,T;(T=A||(A={}))[T.spawn=0]="spawn",T[T.blackHole=1]="blackHole",T[T.twitter=2]="twitter",T[T.autosage=3]="autosage",T[T.moon=4]="moon";let B,U,H,V,G,R,W,O,q=0,N=!1;var _=new Audio("/3D-Interactive-Portfolio/assets/zoomout.73f18dd5.wav");_.volume=.9;var X=new Audio("/3D-Interactive-Portfolio/assets/background.dd42b1f0.mp3");X.volume=.65;var Y=!1,Z=!1,J=!1,K=!1,Q=!1,$=new l,tt=new d;const et={x:0,y:0,z:360};let nt={isLocked:!1,target:null,name:0};const ot={isLocked:!0,target:{position:et},name:0};function it(t){if(!nt.isLocked||Q)if(Q)at();else{if(tt.x=t.clientX/window.innerWidth*2-1,tt.y=-t.clientY/window.innerHeight*2+1,$.setFromCamera(tt,H),!Q&&$.ray.intersectsBox((new C).setFromObject(G.entity)))return console.log("Hit detected on twitter world (not close up)"),void(nt={isLocked:!0,target:G.entity,name:2});var e=$.intersectObjects(U.children);console.log(e[0].object.name),"star"!=e[0].object.name&&"skybox"!=e[0].object.name&&"blackhole"!=e[0].object.name&&"blackholecore"!=e[0].object.name&&"gridhelper"!=e[0].object.name&&(nt.isLocked=!0,nt.target=e[0].object,"moon"==e[0].object.name?nt.name=4:"autosage"==e[0].object.name&&(nt.name=3))}}function at(){dt(!1),lt(nt.name,!0),nt=ot,_.play()}function st(t){document.getElementById("portfolioDiv").style.visibility="visible";let e=document.getElementById("title"),n=document.getElementById("spanBody");switch(t){case 2:e.innerHTML="What Song Is That? Twitter Bot (2020)",n.innerHTML='I decided to write and host a twitter bot for fun on my own server, using a Raspberry Pi, for a friend\'s twitter account. That bot has over a hundred thousand followers now. The success of that bot led me to make my own more sophisticated bot called What Song Is That? It takes requests from users who wish to know what song is playing in a tweet, queries Shazam\'s API on their behalf and displays its findings cleanly on a website I made for it. Visit <a href="https://whatsong.page" target="_blank">whatsong.page</a> for more information.';break;case 3:e.innerHTML="AutoSage (2021)",n.innerHTML='AutoSage is a Python written tool for users of BeatSage, an AI driven service made for the popular VR rhythm game Beat Saber. AutoSage simplifies and automates the process of using BeatSage for all of the songs the user wishes to play in Beat Saber. See the tool\'s repo here: <a href="https://github.com/alanmun/autosage" target="_blank">github.com/alanmun/autosage</a>';break;default:console.log("Unknown case in addText")}}function rt(){document.getElementById("portfolioDiv").style.visibility="hidden"}function lt(t,e){switch(e?(Q=!1,H.rotation.y=0):(Q=!0,H.rotation.y=1.57),t){case 1:case 4:break;case 2:e?(G.swapEntities(U),rt()):(G.swapEntities(U),st(t),nt.target=G.entityCloseUp);break;case 3:e?(W.swapEntities(U),rt()):(W.swapEntities(U),st(t),nt.target=W.entityCloseUp);break;default:console.log("DEFAULT TRIGGERED!?!?!?!?")}}function dt(t=!0,e="730ms"){var n=document.getElementById("bg");return n.style.transitionDuration=e,n.style.opacity=t?"0":"1",!1}function ct(t,e){let n=.5*t.parameters.width,o=new d(-n,0),i=new d(0,e),a=new d(n,0),s=(new d).subVectors(o,i),r=(new d).subVectors(i,a),l=(new d).subVectors(o,a),c=s.length()*r.length()*l.length()/(2*Math.abs(s.cross(l))),w=new d(0,e-c),h=2*((new d).subVectors(o,w).angle()-.5*Math.PI),m=t.attributes.uv,p=t.attributes.position,u=new d;for(let d=0;d<m.count;d++){let t=1-m.getX(d),e=p.getY(d);u.copy(a).rotateAround(w,h*t),p.setXYZ(d,u.x,e,-u.y)}p.needsUpdate=!0}function wt(t){var e=t.which;if(32==e||27==e){if(0==nt.name)return;if(nt.isLocked&&!Q)return;at()}}function ht(t){t.target.remove()}function mt(){q+=1}function pt(){H.aspect=window.innerWidth/window.innerHeight,H.updateProjectionMatrix(),V.setSize(window.innerWidth,window.innerHeight)}(new class{addStar(e=!1){let o,i=t.randFloat(.75,.95);switch(t.randInt(1,3)){case 1:o=new r("#2407FF");break;case 2:o=new r("#FFB200");break;default:o=new r("white")}const a=new c(i,16,16),s=new w({uniforms:{glowColor:{value:o},p:{value:3},c:{value:.5},viewVector:{value:H.position}},vertexShader:S,fragmentShader:L,side:h,blending:m,transparent:!0}),l=new n(a,s);let d,p,u,g,f,y;g=0==t.randInt(0,1)?-1:1,f=0==t.randInt(0,1)?-1:1,y=e||0==t.randInt(0,1)?-1:1;const b=700;d=t.randFloat(0,g*b),u=t.randFloat(0,y*b),p=Math.abs(u)>350||Math.abs(d)>350?t.randFloat(0,f*b):t.randFloat(350*f,f*b),l.position.set(d,p,u),l.name="star",U.add(l)}pinCameraToWorld(t){H.position.set(t.position.x,t.position.y+8,t.position.z)}adjustCamera(t){const e=H.position.x-t.position.x,n=H.position.y-t.position.y,o=H.position.z-t.position.z,i=.08,a=.05,s=.025,r=.05;let l=Math.abs(e);l>18?H.position.x-=e*i:l>5?(H.position.x-=e*a,Y=!0):l>1?(H.position.x-=e*s,Y=!0):l>.1?(H.position.x-=Math.sign(e)*r,Y=!0):l>=0&&(H.position.x=t.position.x,Y=!0);let d=Math.abs(n);d>18?H.position.y-=n*i:d>5?(H.position.y-=n*a,Z=!0):d>1?(H.position.y-=n*s,Z=!0):d>.1?(H.position.y-=Math.sign(n)*r,Z=!0):d>=0&&(H.position.y=t.position.y,Z=!0);let c=Math.abs(o);c>18?H.position.z-=o*i:c>5?(H.position.z-=o*a,J=!0):c>1?(H.position.z-=o*s,J=!0):c>.1?(H.position.z-=Math.sign(o)*r,J=!0):c>=0&&(H.position.z=t.position.z,J=!0),H.position.x==et.x&&H.position.y==et.y&&H.position.z==et.z?(nt={isLocked:!1,target:null,name:0},console.log("Matched at spawn: "+H.position.x+"  "+et.x),Y=!1,Z=!1,J=!1,K=!1):Y&&Z&&J&&(0==K&&(dt(),setTimeout((function(){lt(nt.name,!1),dt(!1)}),1e3)),K=!0)}init(){let o;U=new p,document.body.addEventListener("mousemove",(function(){N&&X.play()}));const a=new E((()=>{console.log("Loaded: "+q),console.log("Loaded skybox"),o=new n(l,d),o.name="skybox",U.add(o);const t=document.querySelector("#loading-screen");null==t||t.classList.add("fade-out"),null==t||t.addEventListener("transitionend",ht),N=!0})),s=new u(a);let l=new g(2100,2100,2100),d=[new f({map:s.load("/3D-Interactive-Portfolio/assets/right.19f9b8b4.png",mt)}),new f({map:s.load("/3D-Interactive-Portfolio/assets/left.06e25816.png",mt)}),new f({map:s.load("/3D-Interactive-Portfolio/assets/top.14e60ce3.png",mt)}),new f({map:s.load("/3D-Interactive-Portfolio/assets/bottom.8560bb79.png",mt)}),new f({map:s.load("/3D-Interactive-Portfolio/assets/front.e060fa56.png",mt)}),new f({map:s.load("/3D-Interactive-Portfolio/assets/back.1d924bd0.png",mt)})];d.forEach((t=>t.side=h));let C=new u(a).load("/3D-Interactive-Portfolio/assets/moon.b246064f.jpg",mt),A=new u(a).load("/3D-Interactive-Portfolio/assets/moonbumpmap.8e277ece.jpg",mt),T=new u(a).load("/3D-Interactive-Portfolio/assets/rockmoss.88c3f847.jpg",mt),_=new u(a).load("/3D-Interactive-Portfolio/assets/rockmossnormal.eb3db67b.jpg",mt),Y=new u(a).load("/3D-Interactive-Portfolio/assets/rockmossroughness.4bc586f8.jpg",mt);H=new y(35,window.innerWidth/window.innerHeight,.1,5e3),H.position.z=et.z,H.position.y=et.y,H.position.x=et.x,window.addEventListener("mousedown",it,!1),window.addEventListener("keydown",wt,!1),window.addEventListener("resize",pt,!1),V=new b({canvas:document.querySelector("#bg"),logarithmicDepthBuffer:!0,antialias:!0}),V.setPixelRatio(window.devicePixelRatio),V.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(V.domElement),new v(a).load("/3D-Interactive-Portfolio/assets/block.2c6f7181.glb",(function(o){W=new P("autosage",!0,95,o.scene);let a=W.entity;a.scale.set(5,5,5);let s=!0;a.traverse((function(t){t instanceof n&&(console.log(t),s&&(s=!1,t.material=new i({color:"#cc0000",shininess:1,flatShading:!0})))})),U.add(W.entity),O=new e;let r=new k(64,96,32,32),l=new I({color:"black",map:C,metalness:0,normalMap:A});l.side=h,ct(r,5);let d=new n(r,l);d.rotation.x+=90*t.DEG2RAD,d.rotation.z+=90*t.DEG2RAD,O.add(d),W.setCloseUp(O);for(let t=0;t<4;t++)W.addTree()}),void 0,(function(t){console.error(t)}));const Z=new x(new r("white"),1);U.add(Z),B=new M(H,V.domElement),B.enabled=!1;for(let t=0;t<600;t++)this.addStar();let J=0,K=new P("blackhole",!1,0);K.addMesh(new c(6,128,128),new w({uniforms:{glowColor:{value:new D(.1,.1,.1)},p:{value:6},c:{value:.25},viewVector:{value:H.position}},vertexShader:S,fragmentShader:L,side:h,blending:m,transparent:!0}));let $=new n(new c(4.75,256,256),new j({color:"black",clearcoat:1,side:z}));$.name="blackholecore",U.add($),U.add(K.entity),new F(a).load("/3D-Interactive-Portfolio/assets/twitter.f3599cc1.obj",(function(o){o.traverse((function(t){t instanceof n&&(t.material=new I({color:4177151,roughness:0,metalness:0,flatShading:!1}),t.rotation.y+=7.5)})),G=new P("twitter",!0,60,o),R=new e;let i=new k(64,64,128,128),a=new I({map:T,roughnessMap:Y,bumpMap:_});a.side=h,ct(i,4);let s=new n(i,a);R.add(s),G.setCloseUp(R),s.rotation.x+=90*t.DEG2RAD,s.rotation.z+=90*t.DEG2RAD;for(let t=0;t<10;t++)G.addTree();U.add(G.entity),mt()}));let tt=new P("moon",!1,120);tt.addMesh(new c(6,64,64),new I({color:"white",map:C,normalMap:C})),U.add(tt.entity);const ot=()=>{requestAnimationFrame(ot),J=K.reverberate(J),W.adjustOrbit(),tt.adjustOrbit(),G.adjustOrbit(),W.rotate(.01,.005,.001),tt.rotate(.001,.001,0),G.rotate(0,0,.002),nt.isLocked&&(Q?this.pinCameraToWorld(nt.target):this.adjustCamera(nt.target)),V.render(U,H)};ot()}}).init();
