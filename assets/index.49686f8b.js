import{M as t,G as e,a as o,R as n,V as i,S as s,b as a,C as r,c as d,T as l,B as c,d as h,P as w,W as p,e as m,f as u,A as y,g as b,O as g,h as f,i as v,L as x}from"./vendor.3ae14f8e.js";class I{constructor(n,i,s,a=null){this.isGroup=!1,this.distance=0,this.tilt=t.randInt(-70,10),this.theta=t.randFloat(0,6.28318530718),this.cameraIsAt=!1,this.entity=null,this.entityCloseUp=null,null!=a?this.entity=a:this.isGroup?this.entity=new e:this.entity=new o,this.entity.name=n,this.isGroup=i,this.distance=s}swapEntities(t){!1===this.cameraIsAt?(t.remove(this.entity),t.add(this.entityCloseUp),this.cameraIsAt=!0):(t.remove(this.entityCloseUp),t.add(this.entity),this.cameraIsAt=!1)}addMesh(t,e){this.isGroup?this.entity.add(new o(t,e)):(this.entity.geometry=t,this.entity.material=e)}setCloseUp(t){this.entityCloseUp=t}rotate(t,e,o){this.entity.rotation.x+=t,this.entity.rotation.y+=e,this.entity.rotation.z+=o}adjustOrbit(){let t;t=this.cameraIsAt?this.entityCloseUp:this.entity;t.position.x=this.distance*Math.cos(this.theta),t.position.y=this.distance*Math.sin(this.theta),t.position.z=this.tilt*Math.sin(this.theta),this.theta+=1/(.07*this.distance**2)}setName(t){this.entity.name=t}getName(){return this.entity.name}}var M,k,j="/3D-Interactive-Portfolio/assets/twitter.f3599cc1.obj";let z,D,C,P,E,A;(k=M||(M={}))[k.spawn=0]="spawn",k[k.blackHole=1]="blackHole",k[k.twitter=2]="twitter",k[k.autosage=3]="autosage",k[k.torus=4]="torus",k[k.moon=5]="moon";var L=new Audio("/3D-Interactive-Portfolio/assets/zoomout.73f18dd5.wav");L.volume=.9;var F=new Audio("/3D-Interactive-Portfolio/assets/background.dd42b1f0.mp3");F.volume=.65;var U=!1,G=!1,S=!1,O=!1,R=!1,T=new n,W=new i;const H={x:0,y:0,z:290};let V={isLocked:!1,target:null,name:0};function q(t){if(W.x=t.clientX/window.innerWidth*2-1,W.y=-t.clientY/window.innerHeight*2+1,T.setFromCamera(W,C),T.intersectObjects(D.children),T.ray.intersectsBox((new v).setFromObject(E.entity)))V={isLocked:!0,target:E.entity,name:2};else for(var e=T.intersectObjects(D.children),o=0;o<e.length;o++)if("star"!=e[o].object.name&&"skybox"!=e[o].object.name)return V.isLocked=!0,V.target=e[o].object,void("moon"==e[o].object.name?V.name=5:"black hole"==e[o].object.name?V.name=1:"torus"==e[o].object.name&&(V.name=4))}function B(t){if(0!=V.name){var e=t.which;32!=e&&27!=e||(N(!1),Y(V.name,!0),V={isLocked:!0,target:{position:H},name:0},L.play())}}function X(){console.log("Texture is loaded now")}function Y(t,e){switch(e?(R=!1,C.rotation.y=0):(R=!0,C.rotation.y=1.57),t){case 1:case 5:break;case 2:e?E.swapEntities(D):(E.swapEntities(D),V.target=E.entityCloseUp);break;case 3:break;default:console.log("DEFAULT TRIGGERED!?!?!?!?")}}function N(t=!0,e="730ms"){var o=document.getElementById("bg");return o.style.transitionDuration=e,o.style.opacity=t?"0":"1",!1}(new class{addStar(e=!1){const n=new s(t.randFloat(.25,.75),24,24),i=new a({color:new r("white")}),d=new o(n,i);let l,c,h,w,p,m;w=0==t.randInt(0,1)?-1:1,p=0==t.randInt(0,1)?-1:1,m=e||0==t.randInt(0,1)?-1:1;const u=700;l=t.randFloat(0,w*u),h=t.randFloat(0,m*u),c=Math.abs(h)>250||Math.abs(l)>250?t.randFloat(0,p*u):t.randFloat(250*p,p*u),d.position.set(l,c,h),d.name="star",z.add(d)}pinCameraToWorld(e){console.log(C.rotation.x+30*t.DEG2RAD),C.position.set(e.position.x,e.position.y+10,e.position.z)}adjustCamera(t,e=.08,o=.025){const n=C.position.x-t.position.x,i=C.position.y-t.position.y,s=C.position.z-t.position.z,a=.05,r=.05;let d=Math.abs(n);d>18?C.position.x-=n*e:d>5?(C.position.x-=n*a,U=!0):d>1?(C.position.x-=n*o,U=!0):d>.1?(C.position.x-=Math.sign(n)*r,U=!0):d>=0&&(C.position.x=t.position.x,U=!0);let l=Math.abs(i);l>18?C.position.y-=i*e:l>5?(C.position.y-=i*a,G=!0):l>1?(C.position.y-=i*o,G=!0):l>.1?(C.position.y-=Math.sign(i)*r,G=!0):l>=0&&(C.position.y=t.position.y,G=!0);let c=Math.abs(s);c>18?C.position.z-=s*e:c>5?(C.position.z-=s*a,S=!0):c>1?(C.position.z-=s*o,S=!0):c>.1?(C.position.z-=Math.sign(s)*r,S=!0):c>=0&&(C.position.z=t.position.z,S=!0),C.position.x==H.x&&C.position.y==H.y&&C.position.z==H.z?(V={isLocked:!1,target:null,name:0},console.log("Matched at spawn: "+C.position.x+"  "+H.x),U=!1,G=!1,S=!1,O=!1):U&&G&&S&&(0==O&&(N(),setTimeout((function(){Y(V.name,!1),N(!1)}),1e3)),O=!0)}init(){let e;z=new d,document.body.addEventListener("mousemove",(function(){F.play()}));const n=new x,v=new l(n);let M=new c(2100,2100,2100),k=[new a({map:v.load("/3D-Interactive-Portfolio/assets/right.19f9b8b4.png",X)}),new a({map:v.load("/3D-Interactive-Portfolio/assets/left.06e25816.png",X)}),new a({map:v.load("/3D-Interactive-Portfolio/assets/top.14e60ce3.png",X)}),new a({map:v.load("/3D-Interactive-Portfolio/assets/bottom.8560bb79.png",X)}),new a({map:v.load("/3D-Interactive-Portfolio/assets/front.e060fa56.png",X)}),new a({map:v.load("/3D-Interactive-Portfolio/assets/back.1d924bd0.png",X)})];k.forEach((t=>t.side=h)),n.onLoad=()=>{console.log("Loaded skybox"),e=new o(M,k),e.name="skybox",z.add(e),window.onload=function(){const t=document.querySelector("#loading-screen");console.log(t)}};let L=(new l).load("/3D-Interactive-Portfolio/assets/moon.b246064f.jpg"),U=(new l).load("/3D-Interactive-Portfolio/assets/moonbumpmap.8e277ece.jpg");C=new w(60,window.innerWidth/window.innerHeight,.1,5e3),C.position.z=H.z,C.position.y=H.y,window.addEventListener("mousedown",q,!1),window.addEventListener("keydown",B,!1),P=new p({canvas:document.querySelector("#bg")}),P.setPixelRatio(window.devicePixelRatio),P.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(P.domElement);const G=new I("torus",!1,140);G.addMesh(new m(10,3,16,100),new u({color:16737095,flatShading:!1,roughness:0,wireframe:!1})),z.add(G.entity);const S=new y(new r("white"),1);z.add(S),new b(200,50);for(let t=0;t<600;t++)this.addStar();let O=new I("black hole",!1,0);O.addMesh(new s(6,128,128),new u({color:"black",roughness:0,metalness:1,flatShading:!1})),z.add(O.entity),console.log(j),(new g).load(j,(function(t){t.traverse((function(t){t instanceof o&&(t.material=new u({color:4177151,roughness:0,metalness:0,flatShading:!1}),t.rotation.y+=7.5)})),E=new I("twitter",!0,90,t),E.setCloseUp(A),z.add(E.entity)}));let T=new f(64,96,32,32),W=new u({color:4177151,map:L,metalness:0,normalMap:U});W.side=h,function(t,e){let o=.5*t.parameters.width,n=new i(-o,0),s=new i(0,e),a=new i(o,0),r=(new i).subVectors(n,s),d=(new i).subVectors(s,a),l=(new i).subVectors(n,a),c=r.length()*d.length()*l.length()/(2*Math.abs(r.cross(l))),h=new i(0,e-c),w=2*((new i).subVectors(n,h).angle()-.5*Math.PI),p=t.attributes.uv,m=t.attributes.position,u=new i;for(let i=0;i<p.count;i++){let t=1-p.getX(i),e=m.getY(i);u.copy(a).rotateAround(h,w*t),m.setXYZ(i,u.x,e,-u.y)}m.needsUpdate=!0}(T,5),A=new o(T,W),A.rotation.x+=90*t.DEG2RAD;let Y=new I("moon",!1,170);Y.addMesh(new s(6,64,64),new u({color:"white",map:L,normalMap:L})),z.add(Y.entity),D=z;const N=()=>{requestAnimationFrame(N),G.adjustOrbit(),Y.adjustOrbit(),E.adjustOrbit(),G.rotate(.01,.005,.001),Y.rotate(.001,.001,0),E.rotate(0,0,.002),V.isLocked&&(R?this.pinCameraToWorld(V.target):this.adjustCamera(V.target)),P.render(D,C)};N()}}).init();
