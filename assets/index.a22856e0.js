import{M as e,G as t,a as n,C as o,b as a,c as i,O as s,d as r,R as l,V as d,S as c,e as h,B as m,A as w,f as u,P as p,W as g,g as y,T as b,h as f,i as v,j as k,D as x,k as I,l as E,m as D,n as M,o as S,p as j,q as C,r as T,s as A,L as F}from"./vendor.80f70a50.js";class L{constructor(o,a,i,s=null){this.isGroup=!1,this.distance=0,this.tilt=e.randInt(-70,10),this.theta=e.randFloat(0,6.28318530718),this.cameraIsAt=!1,this.entity=null,this.entityCloseUp=null,null!=s?this.entity=s:this.isGroup?this.entity=new t:this.entity=new n,this.entity.name=o,this.isGroup=a,this.distance=i}swapEntities(e){!1===this.cameraIsAt?(e.remove(this.entity),e.add(this.entityCloseUp),this.cameraIsAt=!0):(e.remove(this.entityCloseUp),e.add(this.entity),this.cameraIsAt=!1)}addMesh(e,t){this.isGroup?this.entity.add(new n(e,t)):(this.entity.geometry=e,this.entity.material=t)}setCloseUp(e){this.entityCloseUp=e,this.entityCloseUp.name=this.entity.name+" close"}rotate(e,t,n){this.entity.rotation.x+=e,this.entity.rotation.y+=t,this.entity.rotation.z+=n}adjustOrbit(){let e;e=this.cameraIsAt?this.entityCloseUp:this.entity;e.position.x=this.distance*Math.cos(this.theta),e.position.y=this.distance*Math.sin(this.theta),e.position.z=this.tilt*Math.sin(this.theta),this.theta+=1/(.15*this.distance**2)}addTree(){const t=e.randFloat(.5,1),r=new o(.1,.1,t,12),l=new a({color:"brown"}),d=new i(.4,2*t,12),c=new a({color:"green"}),h=new s;h.add(new n(r,l));const m=new n(d,c);m.position.y=3*t/2,h.add(m),h.position.x-=e.randFloat(7,15),h.position.y+=6,h.position.z-=e.randFloat(-6,6.75),this.entityCloseUp.add(h)}reverberate(t){if("blackhole"==this.entity.name){let n=.5*Math.sin(t)+.5;const o=new r("#BAD1FF"),a=new r("#FFFFFF");let i;return this.entity.material.uniforms.glowColor.value=o.lerp(a,n),i=e.randInt(1,10)>8?.4:0,t+i}return 0}setName(e){this.entity.name=e}getName(){return this.entity.name}}const z="\nuniform vec3 viewVector;\nuniform float c;\nuniform float p;\nvarying float intensity;\nvoid main() \n{\n    vec3 vNormal = normalize( normalMatrix * normal );\n\tvec3 vNormel = normalize( normalMatrix * viewVector );\n\tintensity = pow( c - dot(vNormal, vNormel), p );\n\t\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",B="\nuniform vec3 glowColor;\nvarying float intensity;\nvoid main() \n{\n\tvec3 glow = glowColor * intensity;\n    gl_FragColor = vec4(glow, 1.0);\n}\n";var G,R;(R=G||(G={}))[R.spawn=0]="spawn",R[R.blackHole=1]="blackHole",R[R.twitter=2]="twitter",R[R.autosage=3]="autosage",R[R.moon=4]="moon";let U,H,P,V,q,W,O,N,_;var X=new Audio("/assets/zoomout.73f18dd5.wav");X.volume=.8,X.muted=!0;var Y=new Audio("/assets/background.dd42b1f0.mp3");Y.volume=.65,Y.muted=!0;var Z=!1,J=!1,K=!1,Q=!1,$=!1,ee=new l,te=new d;const ne={x:0,y:0,z:360};let oe={isLocked:!1,target:null,name:0};const ae={isLocked:!0,target:{position:ne},name:0};function ie(e){if(e.target!=document.getElementById("soundbutton")&&(!oe.isLocked||$))if($)se();else{if(te.x=e.clientX/window.innerWidth*2-1,te.y=-e.clientY/window.innerHeight*2+1,ee.setFromCamera(te,P),!$&&ee.ray.intersectsBox((new A).setFromObject(O.entity)))return console.log("Hit detected on autosage world (not close up)"),U.enabled=!1,void(oe={isLocked:!0,target:O.entity,name:3});if(!$&&ee.ray.intersectsBox((new A).setFromObject(q.entity)))return console.log("Hit detected on twitter world (not close up)"),U.enabled=!1,void(oe={isLocked:!0,target:q.entity,name:2});var t=ee.intersectObjects(H.children);console.log(t[0].object.name),"star"!=t[0].object.name&&"skybox"!=t[0].object.name&&"blackhole"!=t[0].object.name&&"blackholecore"!=t[0].object.name&&"gridhelper"!=t[0].object.name&&(U.enabled=!1,oe.isLocked=!0,oe.target=t[0].object,"moon"==t[0].object.name?oe.name=4:"autosage"==t[0].object.name&&(oe.name=3))}}function se(){ce(!1),de(oe.name,!0),oe=ae,X.play()}function re(e){document.getElementById("portfolioDiv").style.visibility="visible";let t=document.getElementById("title"),n=document.getElementById("spanBody");switch(e){case 2:t.innerHTML="What Song Is That? (2020)",n.innerHTML='I decided to write and host a twitter bot for fun on my own server, using a Raspberry Pi, for a friend\'s twitter account. That bot has over a hundred thousand followers now. The success of that bot led me to make my own more sophisticated bot called What Song Is That? It takes requests from users who wish to know what song is playing in a tweet, queries Shazam\'s API on their behalf and displays its findings cleanly on a website I made for it. Visit <a style="text-decoration:none; color:salmon;" href="https://whatsong.page" target="_blank">whatsong.page</a> for more information.';break;case 3:t.innerHTML="AutoSage (2021)",n.innerHTML='AutoSage is a Python written tool for users of BeatSage, an AI driven service made for the popular VR rhythm game Beat Saber. AutoSage simplifies and automates the process of using BeatSage for all of the songs the user wishes to play in Beat Saber. See the tool\'s repo here: <a style="text-decoration:none; color:salmon;" href="https://github.com/alanmun/autosage" target="_blank">github.com/alanmun/autosage</a>';break;case 4:t.innerHTML="3D Interactive Portfolio (2021)",n.innerHTML='This portfolio is written in typescript using the three.js 3D graphics library and deployed using vite. My work on the AutoSage tool led me to discovering three.js. I was enamoured with the library and had to make something with it. I knew that I had always wanted a cool way to show my personal technological efforts and projects so I decided to represent them in their own worlds that can be visited by interacting with them. I learned more from undertaking this project than any other personal project I\'ve ever worked on. I had never written three.js code before, my HTML and CSS skills have definitely improved since beginning, and I gave myself an introduction to shaders and 3D modelling in blender by creating the Beat Saber cube that is floating in space. This portfolio remains a continual work in progress as I plan to update it with new worlds for every technological endeavor I go on. See the repo here: <a style="text-decoration:none; color:salmon;" href="https://github.com/alanmun/3D-Interactive-Portfolio" target="_blank">github.com/alanmun/3D-Interactive-Portfolio</a>';default:console.log("Unknown case in addText")}}function le(){document.getElementById("portfolioDiv").style.visibility="hidden"}function de(e,t){switch(t?($=!1,P.rotation.set(0,0,0),q.distance/=1,O.distance/=1.5,_.distance/=2):($=!0,P.rotation.set(0,1.57,0),q.distance*=1,O.distance*=1.5,_.distance*=2),e){case 1:break;case 4:t?(_.swapEntities(H),le()):(_.swapEntities(H),re(e),oe.target=_.entityCloseUp);break;case 2:t?(q.swapEntities(H),le()):(q.swapEntities(H),re(e),oe.target=q.entityCloseUp);break;case 3:t?(O.swapEntities(H),le()):(O.swapEntities(H),re(e),oe.target=O.entityCloseUp);break;default:console.log("DEFAULT TRIGGERED!?!?!?!?")}}function ce(e=!0,t="730ms"){var n=document.getElementById("bg");return n.style.transitionDuration=t,n.style.opacity=e?"0":"1",!1}function he(e,t){let n=.5*e.parameters.width,o=new d(-n,0),a=new d(0,t),i=new d(n,0),s=(new d).subVectors(o,a),r=(new d).subVectors(a,i),l=(new d).subVectors(o,i),c=s.length()*r.length()*l.length()/(2*Math.abs(s.cross(l))),h=new d(0,t-c),m=2*((new d).subVectors(o,h).angle()-.5*Math.PI),w=e.attributes.uv,u=e.attributes.position,p=new d;for(let d=0;d<w.count;d++){let e=1-w.getX(d),t=u.getY(d);p.copy(i).rotateAround(h,m*e),u.setXYZ(d,p.x,t,-p.y)}u.needsUpdate=!0}function me(e){var t=e.which;if(32==t||27==t){if(0==oe.name)return;if(oe.isLocked&&!$)return;se()}}function we(){Y.play(),Y.muted=!Y.muted,X.muted=!X.muted,X.muted?document.getElementById("soundbutton").src="/assets/muted.55725545.png":document.getElementById("soundbutton").src="/assets/unmuted.a6fc9037.png"}function ue(e){e.target.remove()}function pe(){P.aspect=window.innerWidth/window.innerHeight,P.updateProjectionMatrix(),V.setSize(window.innerWidth,window.innerHeight)}(new class{addStar(t=!1){let o,a=e.randFloat(.75,.95);switch(e.randInt(1,8)){case 1:o=new r("#2407FF");break;case 2:o=new r("#FFB200");break;default:o=new r("white")}const i=new c(a,16,16),s=new h({uniforms:{glowColor:{value:o},p:{value:3},c:{value:.5},viewVector:{value:P.position}},vertexShader:z,fragmentShader:B,side:m,blending:w,transparent:!0}),l=new n(i,s);let d,u,p,g,y,b;g=0==e.randInt(0,1)?-1:1,y=0==e.randInt(0,1)?-1:1,b=t||0==e.randInt(0,1)?-1:1;const f=700;d=e.randFloat(0,g*f),p=e.randFloat(0,b*f),u=Math.abs(p)>380||Math.abs(d)>380?e.randFloat(0,y*f):e.randFloat(380*y,y*f),l.position.set(d,u,p),l.name="star",H.add(l)}pinCameraToWorld(e){P.position.set(e.position.x,e.position.y+8,e.position.z)}adjustCamera(e){const t=P.position.x-e.position.x,n=P.position.y-e.position.y,o=P.position.z-e.position.z,a=.08,i=.05,s=.025,r=.05;let l=Math.abs(t);l>18?P.position.x-=t*a:l>5?(P.position.x-=t*i,Z=!0):l>1?(P.position.x-=t*s,Z=!0):l>.03?(P.position.x-=Math.sign(t)*r,Z=!0):l>=0&&(P.position.x=e.position.x,Z=!0);let d=Math.abs(n);d>18?P.position.y-=n*a:d>5?(P.position.y-=n*i,J=!0):d>1?(P.position.y-=n*s,J=!0):d>.03?(P.position.y-=Math.sign(n)*r,J=!0):d>=0&&(P.position.y=e.position.y,J=!0);let c=Math.abs(o);c>18?P.position.z-=o*a:c>5?(P.position.z-=o*i,K=!0):c>1?(P.position.z-=o*s,K=!0):c>.03?(P.position.z-=Math.sign(o)*r,K=!0):c>=0&&(P.position.z=e.position.z,K=!0),P.position.x==ne.x&&P.position.y==ne.y&&P.position.z==ne.z?(oe={isLocked:!1,target:null,name:0},U.enabled=!0,console.log("Matched at spawn: "+P.position.x+"  "+ne.x),Z=!1,J=!1,K=!1,Q=!1):Z&&J&&K&&!Q&&(ce(),setTimeout((function(){de(oe.name,!1),ce(!1)}),1e3),Q=!0)}init(){var o;let i;H=new u,P=new p(35,window.innerWidth/window.innerHeight,.1,5e3),V=new g({canvas:document.querySelector("#bg"),logarithmicDepthBuffer:!1,antialias:!0}),V.setPixelRatio(window.devicePixelRatio),V.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(V.domElement),U=new y(P,V.domElement),U.rotateSpeed=.45,console.log(U.rotateSpeed),U.minDistance=50,U.maxDistance=370,U.enableZoom=!0,U.enablePan=!1,null==(o=document.getElementById("soundbutton"))||o.addEventListener("click",we);const s=new F((()=>{console.log("Loaded: 0"),console.log("Loaded skybox"),i=new n(d,A),i.name="skybox",H.add(i);const e=document.querySelector("#loading-screen");null==e||e.classList.add("fade-out"),null==e||e.addEventListener("transitionend",ue),P.position.set(0,400,1200),U.enabled=!1,oe=ae,Q=!0})),l=new b(s);let d=new f(2100,2100,2100),A=[new v({map:l.load("/assets/right.19f9b8b4.png")}),new v({map:l.load("/assets/left.06e25816.png")}),new v({map:l.load("/assets/top.14e60ce3.png")}),new v({map:l.load("/assets/bottom.8560bb79.png")}),new v({map:l.load("/assets/front.e060fa56.png")}),new v({map:l.load("/assets/back.1d924bd0.png")})];A.forEach((e=>e.side=m));let G=new b(s).load("/assets/moon.b246064f.jpg"),R=new b(s).load("/assets/moonbumpmap.8e277ece.jpg"),X=new b(s).load("/assets/rockmoss.88c3f847.jpg"),Y=new b(s).load("/assets/rockmossnormal.eb3db67b.jpg"),Z=new b(s).load("/assets/rockmossroughness.4bc586f8.jpg");window.addEventListener("click",ie,!1),window.addEventListener("keydown",me,!1),window.addEventListener("resize",pe,!1),new k(s).load("/assets/block.c03dc9a6.glb",(function(o){O=new L("autosage",!0,85,o.scene);let i=O.entity;i.scale.set(7,7,7);let s=!0;i.traverse((function(e){e instanceof n&&(s?(s=!1,e.material=new a({color:"#cc0000",shininess:1,flatShading:!0})):e.material=new a({color:"#ffffff",flatShading:!0,side:x}))})),H.add(O.entity),N=new t;const r=new I;var l,d,c,h,w,u;d=0,c=0,h=50,w=100,u=10,(l=r).moveTo(d,c+u),l.lineTo(d,c+w-u),l.quadraticCurveTo(d,c+w,d+u,c+w),l.lineTo(d+h-u,c+w),l.quadraticCurveTo(d+h,c+w,d+h,c+w-u),l.lineTo(d+h,c+u),l.quadraticCurveTo(d+h,c,d+h-u,c),l.lineTo(d+u,c),l.quadraticCurveTo(d,c,d,c+u);let p=new E(r);p.center();let g=new D({color:"red",metalness:.1});g.side=m;let y=new n(p,g);y.rotation.x+=90*e.DEG2RAD,y.rotation.z+=90*e.DEG2RAD,N.add(y),O.setCloseUp(N);let b=new t;b=i.clone(!0),b.position.set(-40,1,-15),b.scale.set(1,1,1),b.name="miniblock1",b.rotation.y+=60*e.DEG2RAD,b.children[0].material=new a({color:"#0007cc",shininess:1,flatShading:!0}),N.add(b);let f=b.clone(!0);f.position.set(-40,1,-12.5),f.rotation.y+=30*e.DEG2RAD,b.children[0].material=new a({color:"#cc00c9",shininess:1,flatShading:!0}),N.add(f);let v=b.clone(!0);v.position.set(-35,1,15),v.rotation.x-=90*e.DEG2RAD,v.rotation.y+=30*e.DEG2RAD,v.children[0].material=new a({color:"#11a10a",shininess:1,flatShading:!0}),N.add(v),console.log(N)}),void 0,(function(e){console.error(e)}));const J=new M(new r("white"),1);H.add(J);for(let e=0;e<600;e++)this.addStar();let K=0,ee=new L("blackhole",!1,0);ee.addMesh(new c(6,128,128),new h({uniforms:{glowColor:{value:new S(.1,.1,.1)},p:{value:6},c:{value:.25},viewVector:{value:P.position}},vertexShader:z,fragmentShader:B,side:m,blending:w,transparent:!0}));let te=new n(new c(4.75,128,128),new j({color:"black",clearcoat:1,side:x}));te.name="blackholecore",H.add(te),H.add(ee.entity),new C(s).load("/assets/twitter.f3599cc1.obj",(function(o){o.traverse((function(e){e instanceof n&&(e.material=new D({color:4177151,roughness:0,metalness:0,flatShading:!1}),e.rotation.y+=7.5)})),q=new L("twitter",!0,45,o),W=new t;let a=new T(64,64,128,128),i=new D({map:X,roughnessMap:Z,bumpMap:Y});i.side=m,he(a,4);let s=new n(a,i);W.add(s),q.setCloseUp(W),s.rotation.x+=90*e.DEG2RAD,s.rotation.z+=90*e.DEG2RAD;for(let e=0;e<10;e++)q.addTree();H.add(q.entity)})),_=new L("moon",!1,110),_.addMesh(new c(6,64,64),new D({map:G}));let ne=new t,se=new T(64,64,128,128),re=new D({map:G,bumpMap:R});re.side=m,he(se,4);let le=new n(se,re);ne.add(le),_.setCloseUp(ne),le.rotation.x+=90*e.DEG2RAD,le.rotation.z+=90*e.DEG2RAD,H.add(_.entity);const de=()=>{requestAnimationFrame(de),K=ee.reverberate(K),O.adjustOrbit(),_.adjustOrbit(),q.adjustOrbit(),O.rotate(.001,.001,.01),_.rotate(.001,.001,0),q.rotate(0,0,.002),oe.isLocked&&($?this.pinCameraToWorld(oe.target):this.adjustCamera(oe.target)),V.render(H,P)};de()}}).init();
