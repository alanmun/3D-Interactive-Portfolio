import{M as t,G as e,a as o,C as n,b as i,c as a,O as s,R as r,V as d,d as l,S as c,e as h,f as w,T as p,B as m,g as u,P as g,W as y,h as f,i as b,j as v,A as I,k,l as x,m as M,L as j}from"./vendor.e65614e6.js";class D{constructor(n,i,a,s=null){this.isGroup=!1,this.distance=0,this.tilt=t.randInt(-70,10),this.theta=t.randFloat(0,6.28318530718),this.cameraIsAt=!1,this.entity=null,this.entityCloseUp=null,null!=s?this.entity=s:this.isGroup?this.entity=new e:this.entity=new o,this.entity.name=n,this.isGroup=i,this.distance=a}swapEntities(t){!1===this.cameraIsAt?(t.remove(this.entity),t.add(this.entityCloseUp),this.cameraIsAt=!0):(t.remove(this.entityCloseUp),t.add(this.entity),this.cameraIsAt=!1)}addMesh(t,e){this.isGroup?this.entity.add(new o(t,e)):(this.entity.geometry=t,this.entity.material=e)}setCloseUp(t){this.entityCloseUp=t,this.entityCloseUp.name=this.entity.name+" close"}rotate(t,e,o){this.entity.rotation.x+=t,this.entity.rotation.y+=e,this.entity.rotation.z+=o}adjustOrbit(){let t;t=this.cameraIsAt?this.entityCloseUp:this.entity;t.position.x=this.distance*Math.cos(this.theta),t.position.y=this.distance*Math.sin(this.theta),t.position.z=this.tilt*Math.sin(this.theta),this.theta+=1/(.09*this.distance**2)}addTree(){const e=t.randFloat(.5,1),r=new n(.1,.1,e,12),d=new i({color:"brown"}),l=new a(.4,2*e,12),c=new i({color:"green"}),h=new s;h.add(new o(r,d));const w=new o(l,c);w.position.y=3*e/2,h.add(w),h.position.x-=t.randFloat(7,15),h.position.y+=6,h.position.z-=t.randFloat(-6,6.75),this.entityCloseUp.add(h)}setName(t){this.entity.name=t}getName(){return this.entity.name}}var E,z;(z=E||(E={}))[z.spawn=0]="spawn",z[z.blackHole=1]="blackHole",z[z.twitter=2]="twitter",z[z.autosage=3]="autosage",z[z.moon=4]="moon";let L,P,A,S,C,T,U,B,F,H=0,G=!1;var R=new Audio("/3D-Interactive-Portfolio/assets/zoomout.73f18dd5.wav");R.volume=.9;var W=new Audio("/3D-Interactive-Portfolio/assets/background.dd42b1f0.mp3");W.volume=.65;var O=!1,V=!1,q=!1,X=!1,Y=!1,N=new r,Z=new d;const J={x:0,y:0,z:350};let K={isLocked:!1,target:null,name:0};const Q={isLocked:!0,target:{position:J},name:0};function $(t){if(!K.isLocked||Y){if(Z.x=t.clientX/window.innerWidth*2-1,Z.y=-t.clientY/window.innerHeight*2+1,N.setFromCamera(Z,S),!Y&&N.ray.intersectsBox((new M).setFromObject(T.entity)))return console.log("Hit detected on twitter world (not close up)"),void(K={isLocked:!0,target:T.entity,name:2});var e=N.intersectObjects(A.children);console.log(e[0].object.name),"star"!=e[0].object.name&&"skybox"!=e[0].object.name&&"blackhole"!=e[0].object.name&&"gridhelper"!=e[0].object.name&&(Y&&0==e[0].object.name.includes("close")||(e[0].object.name.includes("close")?_():(K.isLocked=!0,K.target=e[0].object,"moon"==e[0].object.name?K.name=4:"autosage"==e[0].object.name&&(K.name=3))))}}function _(){nt(!1),ot(K.name,!0),K=Q,R.play()}function tt(t){document.getElementById("portfolioDiv").style.visibility="visible";let e=document.getElementById("title"),o=document.getElementById("spanBody");switch(t){case 2:e.innerHTML="What Song Is That? Twitter Bot (2020)",o.innerHTML="I decided to write and host a twitter bot for fun on my own server, using a Raspberry Pi, for a friend's twitter account. That bot has over a hundred thousand followers now. The success of that bot led me to make my own more sophisticated bot called What Song Is That? It takes requests from users who wish to know what song is playing in a tweet, queries Shazam's API on their behalf and displays its findings cleanly on a website I made for it. Visit <a href=\"https://whatsong.page\">whatsong.page</a> for more information.";break;case 3:e.innerHTML="AutoSage (2021)",o.innerHTML='AutoSage is a Python written tool for users of BeatSage, an AI driven service made for the popular VR rhythm game Beat Saber. AutoSage simplifies and automates the process of using BeatSage for all of the songs the user wishes to play in Beat Saber. See the tool\'s repo here: <a href="https://github.com/alanmun/autosage">github.com/alanmun/autosage</a>';break;default:console.log("Unknown case in addText")}}function et(){document.getElementById("portfolioDiv").style.visibility="hidden"}function ot(t,e){switch(e?(Y=!1,S.rotation.y=0):(Y=!0,S.rotation.y=1.57),t){case 1:case 4:break;case 2:e?(T.swapEntities(A),et()):(T.swapEntities(A),tt(t),K.target=T.entityCloseUp);break;case 3:e?(B.swapEntities(A),et()):(B.swapEntities(A),tt(t),K.target=B.entityCloseUp);break;default:console.log("DEFAULT TRIGGERED!?!?!?!?")}}function nt(t=!0,e="730ms"){var o=document.getElementById("bg");return o.style.transitionDuration=e,o.style.opacity=t?"0":"1",!1}function it(t,e){let o=.5*t.parameters.width,n=new d(-o,0),i=new d(0,e),a=new d(o,0),s=(new d).subVectors(n,i),r=(new d).subVectors(i,a),l=(new d).subVectors(n,a),c=s.length()*r.length()*l.length()/(2*Math.abs(s.cross(l))),h=new d(0,e-c),w=2*((new d).subVectors(n,h).angle()-.5*Math.PI),p=t.attributes.uv,m=t.attributes.position,u=new d;for(let d=0;d<p.count;d++){let t=1-p.getX(d),e=m.getY(d);u.copy(a).rotateAround(h,w*t),m.setXYZ(d,u.x,e,-u.y)}m.needsUpdate=!0}function at(t){var e=t.which;if(32==e||27==e){if(0==K.name)return;if(K.isLocked&&!Y)return;_()}}function st(t){t.target.remove()}function rt(){H+=1}function dt(){S.aspect=window.innerWidth/window.innerHeight,S.updateProjectionMatrix(),C.setSize(window.innerWidth,window.innerHeight)}(new class{addStar(e=!1){let n;switch(t.randInt(1,8)){case 1:n=new l("#8575ff");break;case 2:n=new l("#ffce5c");break;default:n=new l("white")}const i=new c(t.randFloat(.25,.75),24,24),a=new h({color:n}),s=new o(i,a);let r,d,w,p,m,u;p=0==t.randInt(0,1)?-1:1,m=0==t.randInt(0,1)?-1:1,u=e||0==t.randInt(0,1)?-1:1;const g=700;r=t.randFloat(0,p*g),w=t.randFloat(0,u*g),d=Math.abs(w)>350||Math.abs(r)>350?t.randFloat(0,m*g):t.randFloat(350*m,m*g),s.position.set(r,d,w),s.name="star",P.add(s)}pinCameraToWorld(t){console.log(S.rotation.x),console.log(S.rotation.y),S.position.set(t.position.x,t.position.y+8,t.position.z)}adjustCamera(t,e=.08,o=.025){const n=S.position.x-t.position.x,i=S.position.y-t.position.y,a=S.position.z-t.position.z,s=.05,r=.05;let d=Math.abs(n);d>18?S.position.x-=n*e:d>5?(S.position.x-=n*s,O=!0):d>1?(S.position.x-=n*o,O=!0):d>.1?(S.position.x-=Math.sign(n)*r,O=!0):d>=0&&(S.position.x=t.position.x,O=!0);let l=Math.abs(i);l>18?S.position.y-=i*e:l>5?(S.position.y-=i*s,V=!0):l>1?(S.position.y-=i*o,V=!0):l>.1?(S.position.y-=Math.sign(i)*r,V=!0):l>=0&&(S.position.y=t.position.y,V=!0);let c=Math.abs(a);c>18?S.position.z-=a*e:c>5?(S.position.z-=a*s,q=!0):c>1?(S.position.z-=a*o,q=!0):c>.1?(S.position.z-=Math.sign(a)*r,q=!0):c>=0&&(S.position.z=t.position.z,q=!0),S.position.x==J.x&&S.position.y==J.y&&S.position.z==J.z?(K={isLocked:!1,target:null,name:0},console.log("Matched at spawn: "+S.position.x+"  "+J.x),O=!1,V=!1,q=!1,X=!1):O&&V&&q&&(0==X&&(nt(),setTimeout((function(){ot(K.name,!1),nt(!1)}),1e3)),X=!0)}init(){let n;P=new w,document.body.addEventListener("mousemove",(function(){G&&W.play()}));const i=new j((()=>{console.log("Loaded: "+H),console.log("Loaded skybox"),n=new o(s,r),n.name="skybox",P.add(n);const t=document.querySelector("#loading-screen");null==t||t.classList.add("fade-out"),null==t||t.addEventListener("transitionend",st),G=!0})),a=new p(i);let s=new m(2100,2100,2100),r=[new h({map:a.load("/3D-Interactive-Portfolio/assets/right.19f9b8b4.png",rt)}),new h({map:a.load("/3D-Interactive-Portfolio/assets/left.06e25816.png",rt)}),new h({map:a.load("/3D-Interactive-Portfolio/assets/top.14e60ce3.png",rt)}),new h({map:a.load("/3D-Interactive-Portfolio/assets/bottom.8560bb79.png",rt)}),new h({map:a.load("/3D-Interactive-Portfolio/assets/front.e060fa56.png",rt)}),new h({map:a.load("/3D-Interactive-Portfolio/assets/back.1d924bd0.png",rt)})];r.forEach((t=>t.side=u));let d=new p(i).load("/3D-Interactive-Portfolio/assets/moon.b246064f.jpg",rt),M=new p(i).load("/3D-Interactive-Portfolio/assets/moonbumpmap.8e277ece.jpg",rt),E=new p(i).load("/3D-Interactive-Portfolio/assets/rockmoss.88c3f847.jpg",rt),z=new p(i).load("/3D-Interactive-Portfolio/assets/rockmossnormal.eb3db67b.jpg",rt),R=new p(i).load("/3D-Interactive-Portfolio/assets/rockmossroughness.4bc586f8.jpg",rt);S=new g(40,window.innerWidth/window.innerHeight,.1,5e3),S.position.z=J.z,S.position.y=J.y,S.position.x=J.x,window.addEventListener("mousedown",$,!1),window.addEventListener("keydown",at,!1),window.addEventListener("resize",dt,!1),C=new y({canvas:document.querySelector("#bg")}),C.setPixelRatio(window.devicePixelRatio),C.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(C.domElement),B=new D("autosage",!1,115),B.addMesh(new f(10,3,16,100),new b({color:16737095,flatShading:!1,roughness:0,wireframe:!1})),F=new e;let O=new v(64,96,32,32),V=new b({color:"black",map:d,metalness:0,normalMap:M});V.side=u,it(O,5);let q=new o(O,V);q.rotation.x+=90*t.DEG2RAD,q.rotation.z+=90*t.DEG2RAD,F.add(q),B.setCloseUp(F);for(let t=0;t<4;t++)B.addTree();P.add(B.entity);const X=new I(new l("white"),1);P.add(X),L=new k(S,C.domElement),L.enabled=!1;for(let t=0;t<600;t++)this.addStar();let N=new D("blackhole",!1,0);N.addMesh(new c(6,128,128),new b({color:"black",roughness:0,metalness:1,flatShading:!1})),N.entity.matrixAutoUpdate=!1,P.add(N.entity),new x(i).load("/3D-Interactive-Portfolio/assets/twitter.f3599cc1.obj",(function(n){n.traverse((function(t){t instanceof o&&(t.material=new b({color:4177151,roughness:0,metalness:0,flatShading:!1}),t.rotation.y+=7.5)})),T=new D("twitter",!0,70,n),U=new e;let i=new v(64,64,128,128),a=new b({map:E,roughnessMap:R,bumpMap:z});a.side=u,it(i,4);let s=new o(i,a);U.add(s),T.setCloseUp(U),s.rotation.x+=90*t.DEG2RAD,s.rotation.z+=90*t.DEG2RAD;for(let t=0;t<10;t++)T.addTree();P.add(T.entity),rt()}));let Z=new D("moon",!1,140);Z.addMesh(new c(6,64,64),new b({color:"white",map:d,normalMap:d})),P.add(Z.entity),A=P;const Q=()=>{requestAnimationFrame(Q),B.adjustOrbit(),Z.adjustOrbit(),T.adjustOrbit(),B.rotate(.01,.005,.001),Z.rotate(.001,.001,0),T.rotate(0,0,.002),K.isLocked&&(Y?this.pinCameraToWorld(K.target):this.adjustCamera(K.target)),C.render(A,S)};Q()}}).init();
