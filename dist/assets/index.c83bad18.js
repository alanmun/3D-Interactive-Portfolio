import{M as t,G as e,a as n,R as s,b as o,C as i,S as a,c as r,d,e as l,T as c,B as w,f as h,P as m,W as p,g as u,h as y,A as g,i as b,j as x,O as f,k,l as v,V as M,m as E,L as j}from"./vendor.5957e3fb.js";var z,C;class A{constructor(s,o,i,a=null){this.isGroup=!1,this.distance=0,this.tilt=t.randInt(-70,10),this.theta=t.randFloat(0,6.28318530718),this.cameraIsAt=!1,this.entity=null,this.entityCloseUp=null,null!=a?this.entity=a:this.isGroup?this.entity=new e:this.entity=new n,this.entity.name=s,this.isGroup=o,this.distance=i}swapEntities(t){!1===this.cameraIsAt?(t.remove(this.entity),t.add(this.entityCloseUp),this.cameraIsAt=!0):(t.remove(this.entityCloseUp),t.add(this.entity),this.cameraIsAt=!1)}addMesh(t,e){this.isGroup?this.entity.add(new n(t,e)):(this.entity.geometry=t,this.entity.material=e)}setCloseUp(t){this.entityCloseUp=t}rotate(t,e,n){this.entity.rotation.x+=t,this.entity.rotation.y+=e,this.entity.rotation.z+=n}adjustOrbit(){let t;t=this.cameraIsAt?this.entityCloseUp:this.entity;t.position.x=this.distance*Math.cos(this.theta),t.position.y=this.distance*Math.sin(this.theta),t.position.z=this.tilt*Math.sin(this.theta),this.theta+=1/(.07*this.distance**2)}setName(t){this.entity.name=t}getName(){return this.entity.name}}let I,L,F,S,U,G;(C=z||(z={}))[C.spawn=0]="spawn",C[C.blackHole=1]="blackHole",C[C.twitter=2]="twitter",C[C.autosage=3]="autosage",C[C.torus=4]="torus",C[C.moon=5]="moon";var D=new Audio("src/assets/zoomout.wav");D.volume=.9;var O=new Audio("src/assets/background.mp3");O.volume=.65;var R=!1,T=!1,H=!1,W=!1,V=!1,B=new E,P=new M;const q={x:0,y:0,z:290};let X={isLocked:!1,target:null,name:0};class Y extends i.exports.Component{addStar(e=!1){const s=new a(t.randFloat(.25,.75),24,24),o=new r({color:new d("white")}),i=new n(s,o);let l,c,w,h,m,p;h=0==t.randInt(0,1)?-1:1,m=0==t.randInt(0,1)?-1:1,p=e||0==t.randInt(0,1)?-1:1;const u=700;l=t.randFloat(0,h*u),w=t.randFloat(0,p*u),c=Math.abs(w)>250||Math.abs(l)>250?t.randFloat(0,m*u):t.randFloat(250*m,m*u),i.position.set(l,c,w),i.name="star",I.add(i)}pinCameraToWorld(e){console.log(F.rotation.x+30*t.DEG2RAD),F.position.set(e.position.x,e.position.y+10,e.position.z)}adjustCamera(t,e=.08,n=.025){const s=F.position.x-t.position.x,o=F.position.y-t.position.y,i=F.position.z-t.position.z,a=.05,r=.05;let d=Math.abs(s);d>18?F.position.x-=s*e:d>5?(F.position.x-=s*a,R=!0):d>1?(F.position.x-=s*n,R=!0):d>.1?(F.position.x-=Math.sign(s)*r,R=!0):d>=0&&(F.position.x=t.position.x,R=!0);let l=Math.abs(o);l>18?F.position.y-=o*e:l>5?(F.position.y-=o*a,T=!0):l>1?(F.position.y-=o*n,T=!0):l>.1?(F.position.y-=Math.sign(o)*r,T=!0):l>=0&&(F.position.y=t.position.y,T=!0);let c=Math.abs(i);c>18?F.position.z-=i*e:c>5?(F.position.z-=i*a,H=!0):c>1?(F.position.z-=i*n,H=!0):c>.1?(F.position.z-=Math.sign(i)*r,H=!0):c>=0&&(F.position.z=t.position.z,H=!0),F.position.x==q.x&&F.position.y==q.y&&F.position.z==q.z?(X={isLocked:!1,target:null,name:0},console.log("Matched at spawn: "+F.position.x+"  "+q.x),R=!1,T=!1,H=!1,W=!1):R&&T&&H&&(0==W&&(K(),setTimeout((function(){J(X.name,!1),K(!1)}),1e3)),W=!0)}componentDidMount(){let e;I=new l,document.body.addEventListener("mousemove",(function(){O.play()}));const s=new j,o=new c(s);let i=new w(2100,2100,2100),v=[new r({map:o.load("src/assets/skyboxwithsun/right.png",_)}),new r({map:o.load("src/assets/skyboxwithsun/left.png",_)}),new r({map:o.load("src/assets/skyboxwithsun/top.png",_)}),new r({map:o.load("src/assets/skyboxwithsun/bottom.png",_)}),new r({map:o.load("src/assets/skyboxwithsun/front.png",_)}),new r({map:o.load("src/assets/skyboxwithsun/back.png",_)})];v.forEach((t=>t.side=h)),s.onLoad=()=>{console.log("Loaded skybox"),e=new n(i,v),e.name="skybox",I.add(e),window.onload=function(){const t=document.querySelector("#loading-screen");console.log(t)}};let E=(new c).load("src/assets/moon.jpg"),z=(new c).load("src/assets/moonbumpmap.jpg");F=new m(60,window.innerWidth/window.innerHeight,.1,5e3),F.position.z=q.z,F.position.y=q.y,window.addEventListener("mousedown",N,!1),window.addEventListener("keydown",Z,!1),S=new p({canvas:document.querySelector("#bg")}),S.setPixelRatio(window.devicePixelRatio),S.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(S.domElement);const C=new A("torus",!1,140);C.addMesh(new u(10,3,16,100),new y({color:16737095,flatShading:!1,roughness:0,wireframe:!1})),I.add(C.entity);const D=new g(new d("white"),1);I.add(D),new b(200,50);for(let t=0;t<600;t++)this.addStar();let R=new A("black hole",!1,0);R.addMesh(new a(6,128,128),new y({color:"black",roughness:0,metalness:1,flatShading:!1})),I.add(R.entity);let T=new A("sun",!0,90),H=(new c).load("src/assets/8k_sun.jpg");new x(new d("white"),2,0),T.addMesh(new a,new y({color:"gold",map:H})),(new f).load("src/assets/twitter.obj",(function(t){t.traverse((function(t){t instanceof n&&(t.material=new y({color:4177151,roughness:0,metalness:0,flatShading:!1}),t.rotation.y+=7.5)})),U=new A("twitter",!0,90,t),U.setCloseUp(G),I.add(U.entity)}));let W=new k(64,96,32,32),B=new y({color:4177151,map:E,metalness:0,normalMap:z});B.side=h,function(t,e){let n=.5*t.parameters.width,s=new M(-n,0),o=new M(0,e),i=new M(n,0),a=(new M).subVectors(s,o),r=(new M).subVectors(o,i),d=(new M).subVectors(s,i),l=a.length()*r.length()*d.length()/(2*Math.abs(a.cross(d))),c=new M(0,e-l),w=2*((new M).subVectors(s,c).angle()-.5*Math.PI),h=t.attributes.uv,m=t.attributes.position,p=new M;for(let u=0;u<h.count;u++){let t=1-h.getX(u),e=m.getY(u);p.copy(i).rotateAround(c,w*t),m.setXYZ(u,p.x,e,-p.y)}m.needsUpdate=!0}(W,5),G=new n(W,B),G.rotation.x+=90*t.DEG2RAD;let P=new A("moon",!1,170);P.addMesh(new a(6,64,64),new y({color:"white",map:E,normalMap:E})),I.add(P.entity),L=I;const Y=()=>{requestAnimationFrame(Y),C.adjustOrbit(),P.adjustOrbit(),U.adjustOrbit(),C.rotate(.01,.005,.001),P.rotate(.001,.001,0),U.rotate(0,0,.002),X.isLocked&&(V?this.pinCameraToWorld(X.target):this.adjustCamera(X.target)),S.render(L,F)};Y()}render(){return o.createElement(o.Fragment,null,o.createElement("section",{id:"loading-screen"},o.createElement("div",{id:"loader"})),o.createElement("canvas",{id:"bg"}),o.createElement("main",null,o.createElement("div",{id:"text"},"Here's some text")))}}function N(t){if(P.x=t.clientX/window.innerWidth*2-1,P.y=-t.clientY/window.innerHeight*2+1,B.setFromCamera(P,F),B.intersectObjects(L.children),B.ray.intersectsBox((new v).setFromObject(U.entity)))X={isLocked:!0,target:U.entity,name:2};else for(var e=B.intersectObjects(L.children),n=0;n<e.length;n++)if("star"!=e[n].object.name&&"skybox"!=e[n].object.name)return X.isLocked=!0,X.target=e[n].object,void("moon"==e[n].object.name?X.name=5:"black hole"==e[n].object.name?X.name=1:"torus"==e[n].object.name&&(X.name=4))}function Z(t){if(0!=X.name){var e=t.which;32!=e&&27!=e||(K(!1),J(X.name,!0),X={isLocked:!0,target:{position:q},name:0},D.play())}}function _(){console.log("Texture is loaded now")}function J(t,e){switch(e?(V=!1,F.rotation.y=0):(V=!0,F.rotation.y=1.57),t){case 1:case 5:break;case 2:e?U.swapEntities(L):(U.swapEntities(L),X.target=U.entityCloseUp);break;case 3:break;default:console.log("DEFAULT TRIGGERED!?!?!?!?")}}function K(t=!0,e="730ms"){var n=document.getElementById("bg");return n.style.transitionDuration=e,n.style.opacity=t?"0":"1",!1}s.render(o.createElement(o.StrictMode,null,o.createElement(Y,null)),document.getElementById("root"));
